<script type="text/ng-template" id="templates/dashboard.html">

  <div class="five columns push-three cc-page-dashboard-column-b">
    <!-- Begin Tasks / Assignments column -->

    <div class="cc-container-widget" id="cc-widget-tasks" data-ng-controller="TasksController">
      <div class="cc-widget-title">
        <h2>Assignments and Tasks</h2>
      </div>
      <div class="cc-tasks-list">
        <div class="cc-widget-body">

          <div class="row cc-widget-tasks-button-top-pad">
            <div class="ten columns centered">
              <ul class="button-group radius even three-up">
                <li>
                  <a class="small button"
                    data-ng-click="switchTasksMode('scheduled')"
                    data-ng-class="{false:'secondary'}[tasks_mode=='scheduled']">Scheduled
                  </a>
                </li>
                <li>
                  <a class="small button"
                    data-ng-click="switchTasksMode('unscheduled')"
                    data-ng-class="{false:'secondary'}[tasks_mode=='unscheduled']">Unscheduled
                  </a>
                </li>
                <li>
                  <a class="small button"
                    data-ng-click="switchTasksMode('completed')"
                    data-ng-class="{false:'secondary'}[tasks_mode=='completed']">Completed
                  </a>
                </li>
              </ul>
            </div>
          </div>

          <div data-ng-switch on="tasks_mode">

            <div data-ng-switch-when="scheduled">

              <h3 class="cc-widget-section-label">Overdue</h3>
              <ul class="cc-widget-tasks-notifications-list cc-widget-section-bottom">
                <li data-ng-repeat="task in filtered = (tasks | filter:filterOverdue) ">
                  <div data-ng-include src="'templates/dashboard_task_loop.html'"></div>
                </li>
              </ul>
              <p ng-show="!filtered.length" class="cc-widget-text">
                There are currently no {{tasks_mode}} tasks/assignments that are overdue.
              </p>

              <h3 class="cc-widget-section-label">Due Today</h3>
              <ul class="cc-widget-tasks-notifications-list cc-widget-section-bottom">
                <li data-ng-repeat="task in filtered = (tasks | filter:filterDueToday) ">
                  <div data-ng-include src="'templates/dashboard_task_loop.html'"></div>
                </li>
              </ul>
              <p ng-show="!filtered.length" class="cc-widget-text">
                There are currently no {{tasks_mode}} tasks/assignments that are due today.
              </p>

              <h3 class="cc-widget-section-label">Due This Week</h3>
              <ul class="cc-widget-tasks-notifications-list cc-widget-section-bottom">
                <li data-ng-repeat="task in filtered = (tasks | filter:filterDueThisWeek) ">
                  <div data-ng-include src="'templates/dashboard_task_loop.html'"></div>
                </li>
              </ul>
              <p ng-show="!filtered.length" class="cc-widget-text">
                There are currently no {{tasks_mode}} tasks/assignments that are due this week.
              </p>

              <h3 class="cc-widget-section-label">Due Next Week</h3>
              <ul class="cc-widget-tasks-notifications-list cc-widget-section-bottom">
                <li data-ng-repeat="task in filtered = (tasks | filter:filterDueNextWeek) ">
                  <div data-ng-include src="'templates/dashboard_task_loop.html'"></div>
                </li>
              </ul>
              <p ng-show="!filtered.length" class="cc-widget-text">
                There are currently no {{tasks_mode}} tasks/assignments that are due next week.
              </p>

            </div>


            <div data-ng-switch-when="unscheduled">
              <h3 class="cc-widget-section-label">Unscheduled</h3>
              <ul class="cc-widget-tasks-notifications-list cc-widget-section-bottom">
                <li data-ng-repeat="task in filtered = (tasks | filter:filterUnScheduled) ">
                  <div data-ng-include src="'templates/dashboard_task_loop.html'"></div>
                </li>
              </ul>
              <p ng-show="!filtered.length" class="cc-widget-text">
                There are currently no {{tasks_mode}} tasks/assignments that are unscheduled.
              </p>
            </div>


            <div data-ng-switch-when="completed">
              <h3 class="cc-widget-section-label">Completed</h3>
              <ul class="cc-widget-tasks-notifications-list cc-widget-section-bottom">
                <li data-ng-repeat="task in filtered = (tasks | filter:{status:'completed'}) ">
                  <div data-ng-include src="'templates/dashboard_task_loop.html'"></div>
                </li>
              </ul>
              <p ng-show="!filtered.length" class="cc-widget-text">
                There are currently no completed {{tasks_mode}} tasks/assignments.
              </p>
            </div>

          </div>
        </div>
      </div>

    </div>
    <!-- End Tasks / Assignments column -->
  </div>


  <div class="four columns push-three cc-page-dashboard-column-c">
    <!-- Begin Notifications column -->

    <div class="cc-container-widget" id="cc-widget-notifications" data-ng-controller="NotificationsController">

      <div class="cc-widget-title">
        <h2>Notifications</h2>
      </div>

      <div class="cc-notifications-list">

          <ul class="cc-widget-tasks-notifications-list cc-widget-section-bottom">
            <li data-ng-repeat="notification in notifications | orderBy:'epoch':true">
            <div class="row">

                <div class="two mobile-one columns">
                  <div class="cc-emitter-square cc-emitter-{{notification.color_class}}"></div>
                </div>

                <div class="eight mobile-two columns cc-notification-text-column">
                  {{notification.title}}
                </div>

                <div class="two mobile-one columns cc-right cc-widget-notifications-date-string">
                  {{notification.date_string}}
                </div>

            </div>

            </li>
          </ul>
      </div>
    </div>

  <!-- End Notifications column -->
  </div>

  <div class="three columns pull-nine cc-page-dashboard-column-a">
    <!-- Begin Calendar / Classes / Groups column -->

    <div class="cc-container-widget" id="cc-widget-mycalendar" data-ng-controller="UpNextController">
      <div class="cc-widget-title">
        <h2>Up Next <a href="http://bcal.berkeley.edu" class="ir cc-right cc-icon cc-icon-calendar" title="View calendar in bCal">bCal</a></h2>
      </div>
      <div class="cc-widget-mycalendar-container">
        <ul class="cc-widget-mycalendar-datelist" data-ng-class="{'cc-widget-mycalendar-containsopen': containsOpen()}">
          <!-- First loop: timestamped items -->
          <li data-ng-repeat="item in items" data-ng-class="{'cc-selected': item.show}">
            <div class="cc-widget-mycalendar-short" data-ng-click="upnextToggleShow(item)">
              <div class="cc-widget-mycalendar-datelist-time cc-left">
                <div data-ng-switch on="item.is_all_day">
                  <div data-ng-switch-when="true" class="cc-widget-mycalendar-datelist-time-allday cc-left">all-day</div>
                  <div data-ng-switch-when="false">
                    <div class="cc-widget-mycalendar-datelist-time-hour cc-left">{{item.start.epoch * 1000 | date:'H'}}</div>
                    <div class="cc-widget-mycalendar-datelist-time-minutes cc-left">{{item.start.epoch * 1000 | date:'mm'}}<br>
                      <span class="cc-widget-mycalendar-datelist-time-ampm">{{item.start.epoch * 1000 | date:'a' | uppercase}}</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="cc-widget-mycalendar-datelist-summary cc-ellipsis">
                <div class="cc-widget-mycalendar-datelist-title cc-ellipsis">
                  {{item.summary}}
                </div>
                <div class="cc-ellipsis">
                  <a class="cc-widget-mycalendar-datelist-small" data-ng-href="{{item.location_url}}">{{item.location}}</a>
                </div>
              </div>
            </div>
            <div class="cc-widget-mycalendar-more" data-ng-show="item.show">
              <div class="cc-widget-mycalendar-startend row">
                <div data-ng-switch on="item.is_all_day">
                  <p data-ng-switch-when="true">
                    {{item.start.epoch * 1000 | date:'EEE, MMMM d'}}
                  </p>
                  <div data-ng-switch-when="false">
                    <div class="cc-widget-mycalendar-header three columns mobile-one">Start:</div>
                    <div class="nine columns mobile-three">{{item.start.epoch * 1000 | date:'short' | lowercase}}</div>

                    <div class="cc-widget-mycalendar-header three columns mobile-one">End:</div>
                    <div class="nine columns mobile-three">{{item.end.epoch * 1000 | date:'short' | lowercase}}</div>
                  </div>
              </div>
              <span class="cc-widget-mycalendar-header">Organizer:</span>
              <p class="cc-widget-mycalendar-indent">{{item.organizer.displayName}}</p>
              <span data-ng-show="item.attendees" class="cc-widget-mycalendar-header">Invitees:</span>
              <ul class="cc-widget-mycalendar-list-attendees cc-widget-mycalendar-indent">
                <li data-ng-repeat="attendee in item.attendees" class="cc-ellipsis">
                  {{attendee.displayName}}
                </li>
              </ul>
              <p class="cc-widget-mycalendar-indent cc-widget-mycalendar-datelist-small"><a href="{{item.html_link}}">View in bCal</a></p>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <div class="cc-container-widget" id="cc-widget-myclasses" data-ng-controller="MyClassesController">
      <div class="cc-widget-title">
        <h2>My Classes <span class="cc-right cc-widget-title-small">Fall 2012</span></h2>
      </div>
      <div class="cc-widget-mygroups-myclasses-list">
        <ul class="cc-widget-list">
          <li data-ng-repeat="class in myclasses" class="cc-widget-mygroups-myclasses-list-item">
            <div class="row">

              <div class="three mobile-one columns cc-widget-mygroups-myclasses-icon-column">
                <div
                  class="cc-widget-list-icon cc-widget-mygroups-myclasses-icon-column"
                  data-ng-class="{true:'cc-icon-canvas',false:'cc-icon-bspace'}[class.emitter=='Canvas']">
                </div>
              </div>

              <div class="seven mobile-two columns cc-widget-mygroups-myclasses-title-column">
                <a data-ng-href="{{class.site_url}}"
                  class="cc-ellipsis cc-myclasses-link-with-title">{{class.course_code}}
                </a>
                <a class="cc-ellipsis cc-widget-mygroups-myclasses-title-link"
                  data-ng-href="{{class.site_url}}">{{class.name}}
                </a>
              </div>

              <div class="two mobile-one columns cc-widget-mygroups-myclasses-emitter-column">
                <div class="cc-emitter-square cc-emitter-{{class.color_class}}"></div>
              </div>

            </div>
          </li>
        </ul>
      </div>
      <div ng-show="!myclasses.length" class="cc-widget-text">
        There are currently no classes available.
      </div>
    </div>

    <div class="cc-container-widget" id="cc-widget-mygroups" data-ng-controller="MyGroupsController">
      <div class="cc-widget-title">
        <h2>My Groups</h2>
      </div>
      <div class="cc-widget-mygroups-myclasses-list">
        <ul class="cc-widget-list">
          <li data-ng-repeat="group in mygroups" class="cc-widget-mygroups-myclasses-list-item">
            <div class="row">

              <div class="three mobile-one columns cc-widget-mygroups-myclasses-icon-column">
                <div
                  class="cc-widget-list-icon cc-widget-mygroups-myclasses-icon-column"
                  data-ng-class="{true:'cc-icon-canvas',false:'cc-icon-bspace'}[group.emitter=='Canvas']">
                </div>
              </div>

              <div class="seven mobile-two columns cc-widget-mygroups-myclasses-title-column">
                <a class="cc-ellipsis cc-widget-mygroups-myclasses-title-link"
                  data-ng-href="{{group.site_url}}">{{group.title}}
                </a>
              </div>

              <div class="two mobile-one columns cc-widget-mygroups-myclasses-emitter-column">
                <div class="cc-emitter-square cc-emitter-{{group.color_class}}"></div>
              </div>

            </div>
          </li>
        </ul>
      </div>
    </div>
    <!-- End Calendar / Classes / Groups column -->
  </div>

</script>
